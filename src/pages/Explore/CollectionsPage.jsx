import DottedHeading from "@elements/Default/DottedHeading";
import React from "react";
import styled from "styled-components";
import { respondTo } from "@styles/styledMediaQuery";
import {
	CollectionDescription,
	CollectionImage,
	CollectionName,
} from "@pages/Search";
import ReefIcon from "@static/svg/ReefIcon";
import { numberSeparator } from "@utils/numberSeparator";
import Select from "react-select";
import { styles } from "@styles/reactSelectStyles";
import { useEffect } from "react";
import { fetchCollectionsByStats } from "@utils/marketplace";
import { getInfuraURL } from "@utils/getIPFSURL";
import LoadingIcon from "@static/svg/LoadingIcon";

const Wrapper = styled.div`
	padding: 0 6rem;
	min-height: 70vh;
	max-width: 90rem;
	margin: 0 auto;
	display: flex;
	flex-direction: column;
	gap: 1rem;
	${respondTo.md`
		padding: 0;
		h1{
			padding-left: 3rem;
		}
	`}
`;

const Container = styled.div`
	width: 100%;
`;

const CollectionsWrapper = styled.div`
	justify-content: center;
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(0, 35rem));
	width: 100%;
	margin: 0 auto;
	margin-top: 2rem;
	margin-bottom: 1rem;
	gap: 1rem;
`;

const CollectionListItem = styled.div`
	border-radius: 1rem;
	overflow: hidden;
	padding: 0;
	height: 8rem;
	position: relative;
	&:hover > img {
		transform: scale(1.05);
	}
	border: 0.15rem solid var(--app-container-bg-secondary);
`;

const CollectionInfo = styled.div`
	display: flex;
	flex: 1;
	flex-direction: column;
	justify-content: center;
	// padding: 0 1rem;
	padding-right: 1rem;
	color: var(--app-text);
	> p {
		color: var(--app-container-text-primary-hover);
		font-size: 0.9rem;
	}
`;

const CollectionStats = styled.div`
	display: flex;
	flex-direction: column;
	justify-content: center;
	color: var(--app-container-text-primary-hover);
	gap: 0.25rem;
	opacity: 0.8;
	transition: opacity 0.1s ease;
	div {
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: flex-end;
		gap: 1rem;
		width: 100%;
		svg {
			width: 1.5rem;
			height: 1.5rem;
		}
		div {
			color: var(--app-text);
			font-weight: 700;
			justify-content: flex-end;
			flex: 1;
		}
	}
`;

const CollectionTextWrapper = styled.div`
	position: absolute;
	top: 0px;
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: row;
	justify-content: flex-start;
	padding: 1rem;
	gap: 1rem;
	background: linear-gradient(
			0deg,
			rgba(0, 0, 0, 0.9) 0%,
			rgba(0, 0, 0, 0) 80%
		),
		linear-gradient(270deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0) 80%);
	transition: all 0.2s ease-in-out;
	&:hover {
		cursor: pointer;
		div {
			opacity: 1;
		}
	}
`;

const StyledSelect = styled(Select)`
	min-width: 8rem;
	z-index: 6;
	position: relative;
`;

const HeaderContainer = styled.div`
	display: flex;
	flex-direction: row;
	justify-content: space-between;
	align-items: center;
	gap: 1rem;
	margin-bottom: 1rem;
	${respondTo.md`
		flex-direction: column;
	`}
`;

const SortContainer = styled.div`
	display: flex;
	flex-direction: row;
	justify-content: flex-end;
	align-items: center;
	gap: 1rem;
`;

const LoadingContainer = styled.div`
	width: 100%;
	display: grid;
	place-items: center;
`;

// const CollectionBadge = styled.div`
// 	position: absolute;
// 	height: 1.5rem;
// 	width: 2.5rem;
// 	top: 0;
// 	left: .5rem;
// 	border-bottom-right-radius: .35rem;
// 	border-bottom-left-radius: .35rem;
// 	background: black;
// 	color: var(--app-text);
// 	font-weight: 700;
// 	text-align: center;
// 	border: .15rem solid ${props => props.color};
// 	border-top: none;
// `;

// const CollectionBadgeText = styled.div`
// 	color: var(--app-text);
// 	font-size: .8rem;
// 	font-weight: 700;
// `;

const CollectionsPage = () => {
	const [collections, setCollections] = React.useState(undefined);
	const options = [
		{ value: "items", label: "Items" },
		{ value: "volume", label: "Volume" },
		{ value: "itemsSold", label: "Sales" },
		{ value: "average", label: "Average sale" },
	];
	const [defaultValue, setDefaultValue] = React.useState(options[0]);
	const [finished, setFinished] = React.useState(true); // TODO: fix

	const result = {
		collections: [
			{
				id: "DF4cQ85hKBVxb1yjLzAD",
				data: {
					owner: "0x41ce5598DFfd0e96f08C74d4A8cAd097d5Cc51cc",
					image: "ipfs://QmQevdGqZfQaSjzZLaxW6hVfJg2YnB5w3ZxdC9sewBSgQu",
					thumbnail:
						"ipfs://QmUN9DjxdUTEAo9Sy8UuwQaZ1LhXSDQi4TtcXLcq64onH5",
					traits: {
						HEAD: ["CAPTAINHAT", "BANDANA"],
						EYES: ["EYEPATCH"],
						ACCESSORY: ["NA", "TELESCOPE"],
						RACE: [
							"PARROTFISH",
							"STONEFISH",
							"LOBSTER",
							"SHARK",
							"DUGONG",
							"ELECTRICEEL",
							"BLUETANGFISH",
							"TORTOISE",
							"DOLPHIN",
							"LIONFISH",
							"STINGRAY",
							"JELLYFISH",
							"MORAYEELS",
							"SEAHORSE",
							"CLOWNFISH",
							"SQUID",
							"SEASNAKE",
						],
						BACKGROUND: ["BACKGROUND"],
						WEAPON: ["RIFLE", "PISTOL", "SWORD"],
						ALLEGIANCE: [
							"REVENGE",
							"ROYALFORTUNE",
							"FANCY",
							"GALLEY",
							"DELIVERY",
							"QUEENANNE",
							"WHYDAH",
						],
					},
					created: 1667289631172,
					name: "Pepeverse Pirates Collection",
					description:
						"Early adopters collection of 1234  unique items",
					stats: {
						volume: 1999,
						average: 999.5,
						lastUpdated: 5426759,
						items: 1233,
						itemsSold: 2,
					},
				},
			},
			{
				id: "i4xLOMS0Mokqronw9UrB",
				data: {
					owner: "0x55fc4A9D984C725bE1D099152FE270690aEFb977",
					image: "ipfs://QmQWerut6wRsuy8UKmdhmzjN9tWZbpb6JVbez518DP6PRg",
					thumbnail:
						"ipfs://QmYyn946ZE5gPHS24YR796dM22pXu1jbzCEjoFgYzpD7D1",
					created: 1705498801108,
					name: "SIMPSONS RELIFE ",
					description: "One of a kind, Mosaic Simpsons. ",
					traits: {
						"ZOMBIE BART": [""],
						"MOSAIC STYLE": ["", "V"],
						"FOR EVM 4300": [""],
						ILLUMINATI: [""],
						CUPID: ["", "ILLUMINATI"],
						"SCREEN SAVER": ["X"],
						SEASON: [
							"1",
							"2",
							"3",
							"4",
							"5",
							"6",
							"7",
							"8",
							"9",
							"10",
							"11",
							"12",
							"13",
							"14",
							"15",
							"16",
							"17",
							"18",
							"19",
							"20",
							"21",
							"22",
							"23",
							"24",
							"25",
							"26",
							"27",
							"28",
							"29",
							"30",
							"31",
							"32",
							"33",
							"34",
						],
						"FOR THE BEST REEF NFT ECOSYSTEM OWNER": ["EVM 4300"],
						THRONE: [
							"EDITION",
							"EDITION 2",
							"EDITION 3",
							"EDITION 4",
							"EDITION 5",
							"EDITION 6",
							"EDITION 7",
							"EDITION 8",
							"EDITION 9",
							"EDITION 10",
							"EDITION 11",
							"EDITION 12",
							"EDITION 13",
						],
						"SPECIAL VERSION FOR 4300 OWNER": [""],
						"BTC VERSION 1/4": [""],
						"BTC VERSION 2/4": [""],
						"BTC VERSION 3/4": [""],
						"BTC VERSION 4/4": [""],
						SERIES: [
							"1",
							"2",
							"3",
							"4",
							"5",
							"6",
							"7",
							"8",
							"10",
							"11",
							"12",
							"13",
							"14",
							"15",
							"17",
							"18",
							"19",
							"20",
							"21",
							"22",
							"23",
							"24",
							"25",
							"26",
							"27",
							"28",
							"29",
							"30",
							"31",
							"32",
							"33",
							"34",
							"35",
							"36",
							"37",
							"38",
							"39",
							"40",
							"41",
							"42",
							"43",
							"44",
							"45",
							"46",
							"47",
							"48",
							"49",
							"50",
							"51",
							"52",
							"53",
							"54",
							"55",
							"56",
							"57",
							"58",
							"59",
							"60",
							"61",
							"62",
							"63",
							"64",
							"65",
							"66",
							"67",
							"68",
							"69",
							"70",
							"71",
							"72",
							"73",
							"74",
							"75",
							"76",
							"77",
							"78",
							"79",
							"80",
							"81",
							"82",
							"83",
							"84",
							"85",
							"86",
							"87",
							"88",
							"89",
							"90",
							"91",
							"92",
							"93",
							"94",
							"95",
							"96",
							"97",
							"98",
							"99",
							"100",
							"101",
							"102",
							"103",
							"104",
							"105",
							"106",
							"107",
							"108",
							"109",
							"110",
							"111",
							"112",
							"113",
							"114",
							"115",
							"116",
							"117",
							"118",
							"119",
							"120",
							"121",
							"122",
							"123",
							"124",
							"125",
							"126",
							"127",
							"128",
							"129",
							"130",
							"131",
							"132",
							"133",
							"134",
							"135",
							"136",
							"137",
							"138",
							"139",
							"140",
							"141",
							"142",
							"143",
							"144",
							"145",
							"146",
							"147",
							"148",
							"149",
							"150",
							"151",
							"152",
							"153",
							"154",
							"155",
							"156",
							"158",
							"160",
							"161",
							"162",
							"163",
							"164",
							"165",
							"166",
							"167",
							"168",
							"169",
							"170",
							"171",
							"172",
							"173",
							"174",
							"175",
							"176",
							"177",
							"178",
							"179",
							"180",
							"181",
							"182",
							"184",
							"185",
							"186",
							"187",
							"188",
							"189",
							"190",
							"191",
							"192",
							"193",
							"194",
							"195",
							"196",
							"197",
							"198",
							"199",
							"200",
							"201",
							"202",
							"203",
							"204",
							"205",
							"206",
							"207",
							"208",
							"209",
							"210",
							"211",
							"212",
							"213",
							"214",
							"215",
							"216",
							"217",
							"218",
							"219",
							"220",
							"221",
							"222",
							"223",
							"224",
							"225",
							"226",
							"227",
							"228",
							"229",
							"230",
							"231",
							"232",
							"233",
							"234",
							"235",
							"236",
							"237",
							"238",
							"239",
							"240",
							"241",
							"242",
							"243",
							"244",
							"245",
							"246",
							"247",
							"248",
							"249",
							"250",
							"251",
							"252",
							"253",
							"254",
							"255",
							"256",
							"257",
							"258",
							"259",
							"260",
							"261",
							"262",
							"263",
							"264",
							"265",
							"266",
							"267",
							"268",
							"269",
							"270",
							"271",
							"272",
							"273",
							"274",
							"275",
							"276",
							"277",
							"278",
							"279",
							"280",
							"281",
							"282",
							"283",
							"284",
							"285",
							"286",
							"287",
							"288",
							"289",
							"290",
							"291",
							"292",
							"293",
							"294",
							"295",
							"296",
							"297",
							"298",
							"299",
							"300",
							"301",
							"302",
							"303",
							"304",
							"305",
							"306",
							"307",
							"308",
							"309",
							"310",
							"311",
							"312",
							"313",
							"314",
							"315",
							"316",
							"317",
							"318",
							"319",
							"320",
							"321",
							"322",
							"323",
							"324",
							"325",
							"326",
							"327",
							"328",
							"329",
							"330",
							"331",
							"332",
							"333",
							"334",
							"335",
							"336",
							"337",
							"338",
							"339",
							"340",
							"341",
							"342",
							"343",
							"344",
							"345",
							"346",
							"347",
							"348",
							"349",
							"350",
							"351",
							"352",
							"353",
							"354",
							"355",
							"356",
							"357",
							"358",
							"359",
							"360",
							"361",
							"362",
							"363",
							"364",
							"365",
							"366",
							"367",
							"368",
							"369",
							"370",
							"371",
							"372",
							"373",
							"374",
							"375",
							"376",
							"377",
							"378",
							"379",
							"380",
							"381",
							"382",
							"383",
							"384",
							"385",
							"386",
							"387",
							"388",
							"389",
							"390",
							"391",
							"392",
							"393",
							"394",
							"395",
							"396",
							"397",
							"398",
							"399",
							"400",
							"401",
							"402",
							"403",
							"404",
							"405",
							"406",
							"407",
							"408",
							"409",
							"410",
							"411",
							"412",
							"413",
							"414",
							"415",
							"416",
							"417",
							"418",
							"419",
							"420",
							"421",
							"422",
							"423",
							"424",
							"425",
							"426",
							"427",
							"428",
							"429",
							"430",
							"431",
							"432",
							"433",
							"434",
							"435",
							"436",
							"437",
							"438",
							"439",
							"440",
							"441",
							"442",
							"443",
							"444",
							"445",
							"446",
							"447",
							"448",
							"449",
							"450",
							"451",
							"452",
							"453",
							"454",
							"455",
							"456",
							"457",
							"458",
							"459",
							"460",
							"461",
							"462",
							"463",
							"464",
							"465",
							"466",
							"467",
							"468",
							"469",
							"470",
							"471",
							"472",
							"473",
							"474",
							"475",
							"476",
							"477",
							"478",
							"479",
							"480",
							"481",
							"482",
							"483",
							"484",
							"485",
							"486",
							"487",
							"488",
							"489",
							"490",
							"491",
							"492",
							"493",
							"494",
							"495",
							"496",
							"497",
							"498",
							"499",
							"500",
							"501",
							"502",
							"503",
							"504",
							"505",
							"506",
							"507",
							"508",
							"509",
							"510",
							"511",
							"512",
							"513",
							"514",
							"515",
							"516",
							"517",
							"518",
							"519",
							"520",
							"521",
							"522",
							"523",
							"524",
							"525",
							"526",
							"527",
							"528",
							"529",
							"530",
							"531",
							"532",
							"533",
							"534",
							"535",
							"536",
							"537",
							"538",
							"539",
							"540",
							"541",
							"542",
							"543",
							"544",
							"545",
							"546",
							"547",
							"548",
							"549",
							"550",
							"551",
							"552",
							"553",
							"554",
							"555",
							"556",
							"557",
							"558",
							"559",
							"560",
							"561",
							"562",
							"563",
							"564",
							"565",
							"566",
							"567",
							"568",
							"569",
							"570",
							"571",
							"572",
							"573",
							"574",
							"575",
							"576",
							"577",
							"578",
							"579",
							"580",
							"581",
							"582",
							"583",
							"584",
							"585",
							"586",
							"587",
							"588",
							"589",
							"590",
							"591",
							"592",
							"593",
							"594",
							"595",
							"596",
							"597",
							"598",
							"599",
							"600",
							"601",
							"602",
							"603",
							"604",
							"605",
							"606",
							"607",
							"608",
							"609",
							"610",
							"611",
							"612",
							"613",
							"614",
							"615",
							"616",
							"617",
							"618",
							"619",
							"620",
							"621",
							"622",
							"623",
							"624",
							"625",
							"626",
							"627",
							"628",
							"629",
							"630",
							"631",
							"632",
							"633",
							"634",
							"635",
							"636",
							"637",
							"638",
							"639",
							"640",
							"641",
							"642",
							"643",
							"644",
							"645",
							"646",
							"647",
							"648",
							"649",
							"650",
							"651",
							"652",
							"653",
							"654",
							"655",
							"656",
							"657",
							"658",
							"659",
							"660",
							"661",
							"662",
							"663",
							"664",
							"665",
							"666",
							"667",
							"668",
							"669",
							"670",
							"671",
							"672",
							"673",
							"674",
							"675",
							"676",
							"677",
							"678",
							"679",
							"680",
							"681",
							"682",
							"683",
							"684",
							"685",
							"686",
							"687",
							"688",
							"689",
							"690",
							"691",
							"692",
							"693",
							"694",
							"695",
							"696",
							"697",
							"698",
							"699",
							"700",
							"701",
							"702",
							"703",
							"704",
							"705",
							"706",
							"707",
							"708",
							"709",
							"710",
							"711",
							"712",
							"713",
							"714",
							"715",
							"716",
							"717",
							"718",
							"719",
							"720",
							"721",
							"722",
							"723",
							"724",
							"725",
							"726",
							"727",
							"728",
							"729",
							"730",
							"731",
							"732",
							"733",
							"734",
							"735",
							"736",
							"737",
							"738",
							"739",
							"740",
							"741",
							"742",
							"743",
							"744",
							"745",
							"746",
							"747",
							"748",
							"749",
							"750",
							"751",
							"752",
							"753",
							"754",
						],
					},
					stats: {
						items: 761,
						volume: 1262399,
						average: 1633.1164294954722,
						lastUpdated: 9234102,
						itemsSold: 773,
					},
				},
			},
			{
				id: "UsIpKrVq7UXXXAa08Rtf",
				data: {
					owner: "0x55fc4A9D984C725bE1D099152FE270690aEFb977",
					image: "ipfs://QmcyFnP6nv3MpjYiHupEGYVYzG6pYdaQcZsvbHn1Nsx9ZD",
					thumbnail:
						"ipfs://QmRMTPi3CuTREyu3oXke8Hrywdtyotgu9PnGt6H7XxDz6z",
					traits: {
						"GOLD PUNK": ["LAST 10"],
						PUNK: ["500"],
						INSCRIPTION: [
							"#1500",
							"#1499",
							"1498",
							"#1498",
							"#1992",
							"#2558",
							"#1066",
							"#1007",
							"#2500",
							"#1909",
							"#2501",
							"#1501",
							"#1497",
							"#1993",
							"#1005",
							"#1067",
							"#1910",
							"#2559",
							"#1502",
							"#2502",
							"#1020",
							"#2449",
							"#1911",
							"#2504",
							"#2560",
							"#1994",
							"#1496",
							"#1065",
							"#1503",
							"#1008",
							"#2499",
							"#1345",
							"#1019",
							"#1346",
							"#2505",
							"#1000",
							"#2000",
							"#3000",
							"#1111",
							"#4000",
							"#4444",
							"#1001",
							"#3333",
							"#9999",
							"#1504",
							"#1995",
							"#2561",
							"#2507",
							"#5050",
							"#1009",
							"#1064",
							"#1912",
							"#2448",
							"#3334",
							"#4443",
							"#5051",
							"#2223",
							"#999",
							"#1112",
							"#3001",
							"#4001",
							"#199",
							"#1998",
							"#2999",
							"#198",
							"#2998",
							"#2997",
							"#3999",
							"#3998",
							"#2995",
							"#998",
							"#2996",
							"#100",
							"#2994",
							"#2993",
							"#99",
							"#196",
							"#98",
							"#197",
							"#2991",
							"#2990",
							"#3997",
							"#997",
							"#3996",
							"#2989",
							"#2988",
							"#2987",
							"#2986",
							"#194",
							"#3995",
							"#3994",
							"#97",
							"#195",
							"#96",
							"#95",
							"#2985",
							"#2984",
							"#2983",
							"#3993",
							"#3992",
							"#94",
							"#93",
							"#193",
							"#192",
							"#92",
							"#91",
							"#90",
							"#2982",
							"#2981",
							"#89",
							"#88",
							"#87",
							"#191",
							"#190",
							"#189",
							"#86",
							"#187",
							"#2980",
							"#2979",
							"#2978",
							"#85",
							"#2977",
							"#84",
							"#3991",
							"#3990",
							"#3989",
							"#186",
							"#83",
							"#3988",
							"#3987",
							"#82",
							"#185",
							"#184",
							"#81",
							"#183",
							"#182",
							"#181",
							"#80",
							"#10",
							"#180",
							"#79",
							"#179",
							"#78",
							"#178",
							"#77",
							"#76",
							"#177",
							"#75",
							"#74",
							"#176",
							"#175",
							"#73",
							"#174",
							"#172",
							"#171",
							"#170",
							"#169",
							"#168",
							"#167",
							"#166",
							"#165",
							"#164",
							"#163",
							"#162",
							"#161",
							"#160",
							"#159",
							"#158",
							"#157",
							"#156",
							"#155",
							"#154",
							"#153",
							"#72",
							"#71",
							"#70",
							"#69",
							"#68",
							"#67",
							"#66",
							"#65",
							"#64",
							"#63",
							"#62",
							"#173",
							"#61",
							"#60",
							"#59",
							"#58",
							"#57",
							"#56",
							"#55",
							"#54",
							"#53",
							"#152",
							"#52",
							"#151",
							"#150",
							"#51",
							"#50",
							"#149",
							"#148",
							"#147",
							"#146",
							"#145",
							"#144",
							"#143",
							"#142",
							"#141",
							"#140",
							"#139",
							"#138",
							"#137",
							"#136",
							"#135",
							"#134",
							"#133",
							"#132",
							"#131",
							"#130",
							"#129",
							"#128",
							"#127",
							"#126",
							"#125",
							"#124",
							"#123",
							"#122",
							"#121",
							"#120",
							"#119",
							"#118",
							"#117",
							"#116",
							"#115",
							"#114",
							"#113",
							"#112",
							"#111",
							"#110",
							"#109",
							"#108",
							"#107",
							"#106",
							"#105",
							"#104",
							"#103",
							"#102",
							"#101",
							"#299",
							"#298",
							"#297",
							"#296",
							"#295",
							"#294",
							"#293",
							"#292",
							"#291",
							"#290",
							"#289",
							"#288",
							"#287",
							"#286",
							"#285",
							"#284",
							"#283",
							"#282",
							"#281",
							"#280",
							"#279",
							"#278",
							"#277",
							"#276",
							"#275",
							"#274",
							"#273",
							"#272",
							"#271",
							"#270",
							"#269",
							"#268",
							"#267",
							"#266",
							"#265",
							"#264",
							"#263",
							"#262",
							"#261",
							"#260",
							"#259",
							"#258",
							"#257",
							"#256",
							"#255",
							"#254",
							"#253",
							"#252",
							"#251",
							"#250",
							"#249",
							"#248",
							"#247",
							"#246",
							"#245",
							"#244",
							"#243",
							"#242",
							"#241",
							"#240",
							"#239",
							"#238",
							"#237",
							"#236",
							"#235",
							"#234",
							"#233",
							"#232",
							"#231",
							"#230",
							"#229",
							"#228",
							"#227",
							"#226",
							"#225",
							"#224",
							"#223",
							"#222",
							"#221",
							"#220",
							"#219",
							"#218",
							"#217",
							"#216",
							"#215",
							"#214",
							"#213",
							"#212",
							"#211",
							"#210",
							"#209",
							"#208",
							"#207",
							"#206",
							"#205",
							"#204",
							"#203",
							"#202",
							"#201",
							"#200",
							"#399",
							"#398",
							"#397",
							"#396",
							"#395",
							"#394",
							"#393",
							"#392",
							"#391",
							"#390",
							"#389",
							"#388",
							"#387",
							"#386",
							"#385",
							"#384",
							"#383",
							"#382",
							"#381",
							"#380",
							"#379",
							"#378",
							"#377",
							"#376",
							"#375",
							"#374",
							"#373",
							"#372",
							"#371",
							"#370",
							"#369",
							"#368",
							"#367",
							"#366",
							"#365",
							"#364",
							"#363",
							"#362",
							"#361",
							"#360",
							"#359",
							"#358",
							"#357",
							"#356",
							"#355",
							"#354",
							"#353",
							"#352",
							"#351",
							"#350",
							"#349",
							"#348",
							"#347",
							"#346",
							"#345",
							"#344",
							"#343",
							"#342",
							"#341",
							"#340",
							"#339",
							"#338",
							"#337",
							"#336",
							"#335",
							"#334",
							"#333",
							"#332",
							"#331",
							"#330",
							"#329",
							"#328",
							"#327",
							"#326",
							"#325",
							"#324",
							"#323",
							"#322",
							"#49",
							"#48",
							"#47",
							"#46",
							"#45",
							"#44",
							"#43",
							"#42",
							"#41",
							"#40",
							"#39",
							"#38",
							"#37",
							"#36",
							"#35",
							"#34",
							"#33",
							"#32",
							"#31",
							"#30",
							"#29",
							"#28",
							"#27",
							"#26",
							"#25",
							"#24",
							"#23",
							"#22",
							"#21",
							"#20",
							"#19",
							"#18",
							"#17",
							"#16",
							"#15",
							"#14",
							"#13",
							"#12",
							"#11",
							"#9",
							"#8",
							"#7",
							"#6",
							"#5",
							"#4",
							"#3",
							"#2",
							"#1",
							"#0",
						],
					},
					created: 1684333495079,
					name: "REEF PUNK ",
					description:
						"The first Punks on the REEF Blockchain! A unique collection for true fans!  First 500 are ready, 10 every day!",
					stats: {
						items: 506,
						volume: 899596,
						average: 1955.6434782608696,
						lastUpdated: 10866128,
						itemsSold: 460,
					},
				},
			},
			{
				id: "vaVck9BB8EgzDWkWtM9w",
				data: {
					owner: "0x55fc4A9D984C725bE1D099152FE270690aEFb977",
					image: "ipfs://QmPu7fKNv9dMvYTmtyqwPWPNkVdNNjz7ywQmjBAgTRdmMG",
					thumbnail:
						"ipfs://QmTkj2JB4fa1cKtM2ptDWMxuFGZ2mNaC56qGevjen7pi41",
					traits: {
						"SPECIAL FOR EVM": ["4300"],
					},
					created: 1696104064931,
					name: "REEF SKELETRONS ",
					description:
						"REEF SKELETRONS are 777 unique and fantastic NFTs that are ready for deployment in REEFCHAIN! BOOM BOOM BOOM",
					stats: {
						items: 403,
						volume: 171030,
						average: 1221.642857142857,
						lastUpdated: 9611979,
						itemsSold: 140,
					},
				},
			},
			{
				id: "YhOnCnYuMSFm3aHn6ljj",
				data: {
					owner: "0x55fc4A9D984C725bE1D099152FE270690aEFb977",
					image: "ipfs://QmbApcRne6F8mxdrfcJ5kqmCcmcuMo76D6G6QiSsUjxdWU",
					thumbnail:
						"ipfs://QmZ1xAbzkgX1CJSLvs96QQh7w2U8eaXGTaB9NE3VLHB1vP",
					traits: {
						"SPECIAL FOR EVM": ["4300"],
						LAST: ["3", "2", "1"],
						INSCRIPTION: [
							"#333",
							"#332",
							"#331",
							"#330",
							"#329",
							"#328",
							"#327",
							"#326",
							"#325",
							"#324",
							"#323",
							"#322",
							"#321",
							"#320",
							"#319",
							"#318",
							"#317",
							"#316",
							"#315",
							"#314",
							"#313",
							"#312",
							"#311",
							"#310",
							"#309",
							"#308",
							"#307",
							"#306",
							"#305",
							"#304",
							"#303",
							"#302",
							"#301",
							"#300",
							"#299",
							"#298",
							"#297",
							"#296",
							"#295",
							"#294",
							"#293",
							"#292",
							"#291",
							"#290",
							"#289",
							"#288",
							"#287",
							"#286",
							"#285",
							"#284",
							"#283",
							"#282",
							"#281",
							"#280",
							"#279",
							"#278",
							"#277",
							"#276",
							"#275",
							"#274",
							"#273",
							"#272",
							"#271",
							"#270",
							"#269",
							"#268",
							"#267",
							"#266",
							"#265",
							"#264",
							"#263",
							"#262",
							"#261",
							"#260",
							"#259",
							"#258",
							"#257",
							"#256",
							"#255",
							"#254",
							"#253",
							"#252",
							"#251",
							"#250",
							"#249",
							"#248",
							"#247",
							"#246",
							"#245",
							"#244",
							"#243",
							"#242",
							"#241",
							"#240",
							"#239",
							"#238",
							"#237",
							"#236",
							"#235",
							"#234",
							"#233",
							"#232",
							"#231",
							"#230",
							"#229",
							"#228",
							"#227",
							"#226",
							"#225",
							"#224",
							"#223",
							"#222",
							"#221",
							"#220",
							"#219",
							"#218",
							"#217",
							"#216",
							"#215",
							"#214",
							"#213",
							"#212",
							"#211",
							"#210",
							"#209",
							"#208",
							"#207",
							"#206",
							"#205",
							"#204",
							"#203",
							"#202",
							"#201",
							"#200",
							"#199",
							"#198",
							"#197",
							"#196",
							"#195",
							"#194",
							"#193",
							"#192",
							"#191",
							"#190",
							"#189",
							"#188",
							"#187",
							"#186",
							"#185",
							"#184",
							"#183",
							"#182",
							"#181",
							"#180",
							"#179",
							"#178",
							"#177",
							"#176",
							"#175",
							"#174",
							"#173",
							"#172",
							"#171",
							"#170",
							"#169",
							"#168",
							"#167",
							"#166",
							"#165",
							"#164",
							"#163",
							"#162",
							"#161",
							"#160",
							"#159",
							"#158",
							"#157",
							"#156",
							"#155",
							"#154",
							"#153",
							"#152",
							"#151",
							"#150",
							"#149",
							"#148",
							"#147",
							"#146",
							"#145",
							"#144",
							"#143",
							"#142",
							"#141",
							"#140",
							"#139",
							"#138",
							"#137",
							"#136",
							"#135",
							"#134",
							"#133",
							"#132",
							"#131",
							"#130",
							"#129",
							"#128",
							"#127",
							"#126",
							"#125",
							"#124",
							"#123",
							"#122",
							"#121",
							"#120",
							"#119",
							"#118",
							"#117",
							"#116",
							"#115",
							"#114",
							"#113",
							"#112",
							"#111",
							"#110",
							"#109",
							"#108",
							"#107",
							"#106",
							"#105",
							"#104",
							"#103",
							"#102",
							"#101",
							"#100",
							"#99",
							"#98",
							"#97",
							"#96",
							"#95",
							"#94",
							"#93",
							"#92",
							"#91",
							"#90",
							"#89",
							"#88",
							"#87",
							"#86",
							"#85",
							"#84",
							"#83",
							"#82",
							"#81",
							"#80",
							"#79",
							"#78",
							"#77",
							"#76",
							"#75",
							"#74",
							"#73",
							"#72",
							"#71",
							"#70",
							"#69",
							"#68",
							"#67",
							"#66",
							"#65",
							"#64",
							"#63",
							"#62",
							"#61",
							"#60",
							"#59",
							"#58",
							"#57",
							"#56",
							"#55",
							"#54",
							"#53",
							"#52",
							"#51",
							"#50",
							"#49",
							"#48",
							"#47",
							"#46",
							"#45",
							"#44",
							"#43",
							"#42",
							"#41",
							"#40",
							"#39",
							"#38",
							"#37",
							"#36",
							"#35",
							"#34",
							"#33",
							"#32",
							"#31",
							"#30",
							"#29",
							"#28",
							"#27",
							"#26",
							"#25",
							"#24",
							"#23",
							"#22",
							"#21",
							"#20",
							"#19",
							"#18",
							"#17",
							"#16",
							"#15",
							"#14",
							"#13",
							"#12",
							"#11",
							"#10",
							"#9",
							"#8",
							"#7",
							"#6",
							"#5",
							"#4",
							"#3",
							"#2",
							"#1",
						],
					},
					created: 1692304170005,
					name: "REEF MENA COLLECTION ",
					description:
						"This is an incredibly beautiful NFT collection from  author REEF PUNK, dive into  wonderful MENA region! Only 333 Legendary !",
					stats: {
						items: 335,
						volume: 463500,
						average: 1749.0566037735848,
						lastUpdated: 8905025,
						itemsSold: 265,
					},
				},
			},
			{
				id: "6yzU2R7KyMgvZLC8Cz9h",
				data: {
					owner: "0x55fc4A9D984C725bE1D099152FE270690aEFb977",
					image: "ipfs://QmYwr5WcnUDd6gNhkFKcGkqsJBSarSm6SoToWSFnno4F4c",
					thumbnail:
						"ipfs://Qmb8MLmcnTHWxKFJrEeABnijoDRe26wtA9YCHwDGJKMzu1",
					created: 1711640932617,
					name: "REEF FROGS",
					description:
						"The cult collection of NFT is coming to REEF, we are glad to present you unique pixel Frogs!",
					traits: {
						"4/4": [""],
						BRONZE: [""],
						SILVER: [""],
						GOLD: [""],
						RARITY: ["4/4", "3/4", "2/4", "1/4"],
					},
					stats: {
						items: 223,
						volume: 132040,
						average: 1483.5955056179776,
						lastUpdated: 10462542,
						itemsSold: 89,
					},
				},
			},
			{
				id: "ASwOXeRM5DfghnURP4g2",
				data: {
					owner: "0x9a900F8ac88bd31ddfe5D80f2b86891Fd3f1f4E1",
					image: "ipfs://QmdREizTxj54GZ84bZxgRPmfFoZbbu8DS9i96oiZ9NEuTW",
					traits: {},
					created: 1645462242765,
					name: "Sqwid",
					description: "The default Sqwid collection!",
					stats: {
						volume: 23118,
						average: 770.6,
						lastUpdated: 9100423,
						items: 191,
						itemsSold: 30,
					},
				},
			},
			{
				id: "Ezs654cTbTWBDBS8VOAW",
				data: {
					owner: "0x55fc4A9D984C725bE1D099152FE270690aEFb977",
					image: "ipfs://QmQnKewdS6Se2Z9rP4JUdgXH2Kk4Fa5U38dAvWX4Av6unC",
					thumbnail:
						"ipfs://QmeJBzryUYHBDwPEFWiHL7krdXUoCGW5SwFG98uk25ikqZ",
					created: 1710792369541,
					name: "Reef  South Park ",
					description:
						"Bright colors, fantastic backgrounds, all this in the new REEF NFT STORE collection!",
					traits: {
						RARITY: [
							"$3",
							"$6",
							"$4",
							"$9",
							"$5",
							"$10",
							"$15",
							"$7",
							"$8",
							"$11",
							"$12",
							"$14",
							"$17",
							"$20",
							"$18",
							"$13",
							"$19",
							"$22",
							"$16",
							"$23",
							"$21",
							"$25",
							"$30",
							"$26",
							"$27",
							"$28",
							"$45",
							"$32",
							"$35",
							"$48",
							"$50",
							"$39",
							"$55",
							"$56",
							"$60",
							"$65",
							"$54",
							"$67",
							"$70",
							"$75",
							"$76",
							"$78",
							"$80",
							"$85",
							"$99",
							"$100",
							"$110",
							"$112",
							"$115",
							"$120",
							"$200",
							"$210",
							"$215",
							"$220",
						],
					},
					stats: {
						items: 149,
						volume: 72496,
						average: 659.0545454545454,
						lastUpdated: 10388966,
						itemsSold: 110,
					},
				},
			},
		],
	};

	useEffect(() => {
		const fetchCollections = async () => {
			const res = await fetchCollectionsByStats(defaultValue.value);
			console.log("res of collections in main page", res)
			const data = res.collections?.map(item => {
				return {
					id: item?.id,
					name: item.data?.name,
					description:
						item.data?.description?.slice(0, 100) +
						(item.data?.description?.length >= 100 ? "..." : ""),
					thumbnail: getInfuraURL(
						item.data.thumbnail || item.data.image
					),
					stats: {
						items: item.data.stats?.items,
						itemsSold: item.data.stats?.itemsSold,
						volume: item.data.stats?.volume,
						average: item.data.stats?.average,
					},
				};
			});
			setCollections(data);
		};
		fetchCollections();
	}, [defaultValue]);

	// TODO: fix
	const loadMore = async () => {
		const res = await fetchCollectionsByStats(
			defaultValue.value,
			collections[collections.length - 1].stats[defaultValue.value]
		);

		if (!res.collections?.length) {
			setFinished(true);
			return;
		}
		const data = res.collections?.map(item => {
			return {
				id: item.id,
				name: item.data.name,
				description:
					item.data.description.slice(0, 100) +
					(item.data.description.length >= 100 ? "..." : ""),
				thumbnail: getInfuraURL(item.data.thumbnail || item.data.image),
				stats: {
					items: item.data.stats.items,
					itemsSold: item.data.stats.itemsSold,
					volume: item.data.stats.volume,
					average: item.data.stats.average,
				},
			};
		});
		setCollections(collections.concat(data));
	};

	return (
		<>
			<Wrapper>
				<Container>
					<HeaderContainer>
						<DottedHeading size="2.5rem">
							Explore top collections
						</DottedHeading>
						<SortContainer>
							<span>Sort by</span>
							<StyledSelect
								options={options}
								styles={styles}
								isSearchable={false}
								value={defaultValue}
								placeholder="Select Route"
								onChange={item => {
									setDefaultValue(item);
								}}
							/>
						</SortContainer>
					</HeaderContainer>
					<CollectionsWrapper>
						{collections ? (
							collections.map((collection, i) => (
								<CollectionListItem
									key={collection.id}
									onClick={() =>
										(window.location.href = `/collections/${collection.id}`)
									}
									src={collection.thumbnail}
								>
									{/* <CollectionBadge color = {i === 0 ? 'green' : 'red'}>
									<CollectionBadgeText>1</CollectionBadgeText>
								</CollectionBadge> */}
									<CollectionImage
										src={collection.thumbnail}
										alt={collection.name}
									/>
									<CollectionTextWrapper>
										<CollectionInfo>
											<CollectionName>
												{collection.name}
											</CollectionName>
											<CollectionDescription>
												{collection.description}
											</CollectionDescription>
										</CollectionInfo>
										<CollectionStats>
											<div>
												<svg
													clip-rule="evenodd"
													fill-rule="evenodd"
													fill="currentColor"
													stroke-linejoin="round"
													stroke-miterlimit="2"
													viewBox="0 0 24 24"
													xmlns="http://www.w3.org/2000/svg"
												>
													<path
														d="m3.514 6.61c-.317.179-.514.519-.514.887v8.95c0 .37.197.708.514.887 1.597.901 6.456 3.639 8.005 4.512.152.085.319.128.487.128.164 0 .328-.041.477-.123 1.549-.855 6.39-3.523 7.994-4.408.323-.177.523-.519.523-.891v-9.055c0-.368-.197-.708-.515-.887-1.595-.899-6.444-3.632-7.999-4.508-.151-.085-.319-.128-.486-.128-.168 0-.335.043-.486.128-1.555.876-6.405 3.609-8 4.508m15.986 2.115v7.525l-6.75 3.722v-7.578zm-15 7.425v-7.458l6.75 3.75v7.511zm.736-8.769 6.764-3.813 6.801 3.834-6.801 3.716z"
														fill-rule="nonzero"
													/>
												</svg>
												<span>Items</span>
												<div>
													{numberSeparator(
														Math.round(
															collection.stats
																?.items
														)
													)}
												</div>
											</div>
											<div>
												<svg
													xmlns="http://www.w3.org/2000/svg"
													fill="currentColor"
													width="24"
													height="24"
													viewBox="0 0 24 24"
												>
													<path d="M19.523 5.175c-1.397 0-2.335-.494-3.888-1.311-.852-.446-1.536-.864-2.518-.864-1.275 0-1.747.658-2.552 1.564-2.052-1.593-3.513-.907-4.808-.293-.757.358-1.539.729-2.587.729h-3.17v7.91c1.073.102 2.001.169 3.287.464-.789 1.431.057 3.157 1.634 3.422.324.675.971 1.159 1.718 1.286.312.653.942 1.151 1.709 1.279.544 1.147 1.962 1.664 3.188 1.07.434.358.985.569 1.567.569.892 0 1.737-.483 2.145-1.337.748-.157 1.358-.648 1.664-1.296.708-.147 1.324-.604 1.648-1.286 1.386-.282 2.292-1.727 1.688-3.178 1.096-.54 2.221-.76 3.752-1.1v-7.866c-.961.059-3.507.218-4.477.238zm-14.719 9.985c-.377-.284-.424-.828-.103-1.21l.782-.959c.321-.384.887-.465 1.265-.179.38.285.424.826.104 1.211l-.782.956c-.321.385-.887.464-1.266.181zm1.714 1.282c-.378-.286-.433-.816-.111-1.2l.79-.969c.321-.383.887-.464 1.265-.181.378.285.425.828.103 1.21l-.79.969c-.321.385-.877.457-1.257.171zm1.714 1.284c-.378-.285-.426-.828-.103-1.213l.78-.956c.321-.384.887-.467 1.266-.182.377.286.424.827.103 1.211l-.781.958c-.321.385-.889.465-1.265.182zm3.76.14l-.783.963c-.323.386-.888.465-1.266.181-.378-.285-.424-.826-.104-1.21l.785-.964c.322-.382.888-.464 1.265-.178.38.282.426.825.103 1.208zm1.642 1.422c-.154.119-.341.177-.531.177-.137 0-.273-.035-.401-.095l.454-.559c.199-.235.347-.513.44-.81l.124.11c.32.367.279.891-.086 1.177zm4.968-3.87c-.368.284-.924.215-1.24-.146l-2.496-2.141c-.207-.177-.471.136-.266.31l2.433 2.089c.319.366.278.893-.088 1.175-.369.287-.926.219-1.242-.146l-1.915-1.678c-.204-.179-.474.13-.271.309l1.868 1.642c.319.365.272.88-.097 1.166-.364.282-.911.231-1.231-.137l-.365-.325c.133-1.26-.747-2.32-1.924-2.516-.326-.684-.975-1.157-1.712-1.28-.322-.678-.967-1.157-1.712-1.282-.647-1.359-2.428-1.748-3.648-.777-.801-.24-1.688-.437-2.696-.573v-4.108h1.17c1.498 0 2.577-.511 3.443-.922 1.087-.515 1.609-.754 2.581-.046-.64.636-1.294 1.196-1.967 1.589-.589.343-.852.998-.672 1.668.236.874 1.262 1.758 2.767 1.758 1.981 0 2.935-1.196 3.935-1.766 1.493 1.436 3.93 3.644 5.47 5.026.266.362.222.842-.125 1.111zm3.398-4.217c-.912.215-1.801.469-2.707.926-1.085-.979-3.529-3.193-4.399-4.063-.992-.991-1.994-1.086-3.093-.197-.79.636-2.018 1.447-2.971 1.099 1.365-.957 2.592-2.35 3.692-3.596.313-.354.527-.592 1.502-.09l.678.355c1.725.908 3.07 1.627 5.132 1.535.62-.025 1.487-.071 2.166-.11v4.141z" />
												</svg>
												<span>Sales</span>
												<div>
													{numberSeparator(
														Math.round(
															collection.stats
																?.itemsSold
														)
													)}
												</div>
											</div>
											<div>
												<svg
													xmlns="http://www.w3.org/2000/svg"
													fill="currentColor"
													width="24"
													height="24"
													viewBox="0 0 24 24"
												>
													<path d="M7 24h-6v-6h6v6zm8-9h-6v9h6v-9zm8-4h-6v13h6v-13zm0-11l-6 1.221 1.716 1.708-6.85 6.733-3.001-3.002-7.841 7.797 1.41 1.418 6.427-6.39 2.991 2.993 8.28-8.137 1.667 1.66 1.201-6.001z" />
												</svg>
												<span>Volume</span>
												<div>
													{numberSeparator(
														Math.round(
															collection.stats
																?.volume
														)
													)}
												</div>
											</div>
											<div>
												<ReefIcon centered />
												<span>Average sale</span>
												<div>
													{numberSeparator(
														Math.round(
															collection.stats
																?.average
														)
													)}
												</div>
											</div>
										</CollectionStats>
									</CollectionTextWrapper>
								</CollectionListItem>
							))
						) : (
							<>
								<LoadingContainer>
									<LoadingIcon size={64} />
								</LoadingContainer>
							</>
						)}
					</CollectionsWrapper>
					{!finished && <button onClick={loadMore}>load more</button>}
				</Container>
			</Wrapper>
		</>
	);
};

export default CollectionsPage;
